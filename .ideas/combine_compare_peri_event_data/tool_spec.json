{
    "key": "combine_compare_peri_event_data",
    "name": "Combine and Compare Peri-Event Analysis Data",
    "schema_version": "3.0.0",
    "container_image": {
        "repository": "platform/neural-analysis",
        "label": "0.0.6"
    },
    "command": {
        "file_path": "analysis/combine_compare_peri_event_data.py",
        "entry_point": "combine_compare_peri_event_data_ideas_wrapper",
        "program_type": "PYTHON"
    },
    "params": [
        {
            "key": "group1_traces_files",
            "name": "Peri-Event Traces Files",
            "required": true,
            "description": "Select peri-event traces from the first group to use for analysis",
            "type": {
                "param_type": "ToolPathParam",
                "multiple": true,
                "file_formats": [
                    "csv"
                ]
            },
            "group": "Input Group 1"
        },
        {
            "key": "group1_stats_files",
            "name": "Peri-Event Statistics Files",
            "required": true,
            "description": "Select peri-event statistics from the first group to use for analysis",
            "type": {
                "param_type": "ToolPathParam",
                "multiple": true,
                "file_formats": [
                    "csv"
                ]
            },
            "group": "Input Group 1"
        },
        {
            "key": "group1_name",
            "name": "Name",
            "required": true,
            "description": "Name of the first group",
            "type": {
                "param_type": "ToolStringParam",
                "default": "group1"
            },
            "group": "Input Group 1"
        },
        {
            "key": "group2_traces_files",
            "name": "Peri-Event Traces Files",
            "required": false,
            "description": "Select peri-event traces from the second group to use for analysis",
            "type": {
                "param_type": "ToolPathParam",
                "multiple": true,
                "file_formats": [
                    "csv"
                ]
            },
            "group": "Input Group 2"
        },
        {
            "key": "group2_stats_files",
            "name": "Peri-Event Statistics Files",
            "required": false,
            "description": "Select peri-event statistics from the second group to use for analysis",
            "type": {
                "param_type": "ToolPathParam",
                "multiple": true,
                "file_formats": [
                    "csv"
                ]
            },
            "group": "Input Group 2"
        },
        {
            "key": "group2_name",
            "name": "Name",
            "required": false,
            "description": "Name of the second group",
            "type": {
                "param_type": "ToolStringParam"
            },
            "group": "Input Group 2"
        },
        {
            "key": "comparison_type",
            "name": "Comparison Type",
            "required": false,
            "description": "Type of statistical test to perform",
            "type": {
                "param_type": "ToolChoiceParam",
                "choices": [
                    "two_tailed",
                    "one_tailed_less",
                    "one_tailed_greater"
                ],
                "display_options": [
                    "Two-Tailed (Unequal)",
                    "One-Tailed (Less)",
                    "One-Tailed (Greater)"
                ]
            },
            "group": "Statistical Test"
        },
        {
            "key": "data_pairing",
            "name": "Data Pairing",
            "required": false,
            "description": "Indicates whether observations should be paired for statistical comparison",
            "type": {
                "param_type": "ToolChoiceParam",
                "choices": [
                    "unpaired",
                    "paired"
                ],
                "display_options": [
                    "Unpaired",
                    "Paired"
                ]
            },
            "group": "Statistical Test"
        },
        {
            "key": "significance_threshold",
            "name": "Significance Threshold",
            "required": false,
            "description": "p-value threshold for classifying neurons as up- or down-modulated",
            "type": {
                "param_type": "ToolFloatRangeParam",
                "min": 0,
                "max": 1
            },
            "group": "Statistical Test"
        },
        {
            "key": "average_method",
            "name": "Average Method",
            "required": true,
            "description": "Specifies how to average the data in each input group. If 'By Neurons' is selected, the neurons from all recordings in the group will be pooled together and averaged to obtain the group average. If 'By Recordings' is selected, the data contained in each recording will be averaged independently, then the recordings will be averaged together to obtain the group average.",
            "type": {
                "param_type": "ToolChoiceParam",
                "choices": [
                    "neurons",
                    "recordings"
                ],
                "display_options": [
                    "By Neurons",
                    "By Recordings"
                ],
                "default": "neurons"
            },
            "group": "Statistical Test"
        },
        {
            "key": "tolerance",
            "name": "Tolerance",
            "required": true,
            "description": "Maximum time shift in seconds between the time windows of the input traces files",
            "type": {
                "param_type": "ToolFloatRangeParam",
                "min": 0,
                "default": 0.01
            }
        },
        {
            "key": "population_activity_plot_limits",
            "name": "Population activity (y-axis range)",
            "required": false,
            "description": "y-axis range (z-score) applied to the event-aligned population activity plot specified as 'min,max' (e.g. -1,1) or 'auto'",
            "type": {
                "param_type": "ToolStringParam",
                "default": "auto"
            },
            "group": "Visualization Parameters"
        },
         {
            "key": "activity_heatmap_color_limits",
            "name": "Activity heatmap (colormap range)",
            "required": false,
            "description": "Colormap range (z-score) applied to the activity heatmap specified as 'min,max' (e.g. -1,1) or 'auto'",
            "type": {
                "param_type": "ToolStringParam",
                "default": "auto"
            },
            "group": "Visualization Parameters"
        },
        {
            "key": "activity_by_modulation_plot_limits",
            "name": "Activity by modulation group (y-axis range)",
            "required": false,
            "description": "y-axis range (z-score) applied to the event-aligned activity by modulation plot specified as 'min,max' (e.g. -1,1) or 'auto'",
            "type": {
                "param_type": "ToolStringParam",
                "default": "auto"
            },
            "group": "Visualization Parameters"
        },
        {
            "key": "group_colors",
            "name": "Group colors",
            "required": false,
            "description": "Colors that represent group 1 and 2 respectively",
            "type": {
                "param_type": "ToolStringParam",
                "default": "#1f77b4, #ff7f0e"
            },
            "group": "Visualization Parameters"
        },
        {
            "key": "modulation_colors",
            "name": "Modulation colors",
            "required": false,
            "description": "Colors that represent up-, down- and non-modulation respectively",
            "type": {
                "param_type": "ToolStringParam",
                "default": "green,blue,black"
            },
            "group": "Visualization Parameters"
        },
        {
            "key": "cmap",
            "name": "Activity heatmap colormap",
            "required": false,
            "description": "Colormap applied to the activity heatmap",
            "type": {
                "param_type": "ToolStringParam",
                "default": "coolwarm"
            },
            "group": "Visualization Parameters"
        }
        
    ],
    "results": [
        {
            "key": "group1_event_aligned_activity_traces_event_aligned_activity_traces_csv_file",
            "name": "Event-Aligned Data (Group 1)",
            "description": "Event-aligned activity traces",
            "file_patterns": [
                "group1_event_aligned_activity_traces/**/*"
            ]
        },
        {
            "key": "group1_event_aligned_statistics_event_aligned_activity_statistics_csv_file",
            "name": "Event-Aligned Statistics (Group 1)",
            "description": "Statistics associated with the event-aligned data",
            "file_patterns": [
                "group1_event_aligned_statistics/***"
            ]
        },
        {
            "key": "group2_event_aligned_activity_traces_event_aligned_activity_traces_csv_file",
            "name": "Event-Aligned Data (Group 2)",
            "description": "Event-aligned activity traces",
            "file_patterns": [
                "group2_event_aligned_activity_traces/**/*"
            ]
        },
        {
            "key": "group2_event_aligned_statistics_event_aligned_activity_statistics_csv_file",
            "name": "Event-Aligned Statistics (Group 2)",
            "description": "Statistics associated with the event-aligned data",
            "file_patterns": [
                "group2_event_aligned_statistics/**/*"
            ]
        },
        {
            "key": "comparison_data_comparison_data_csv_file",
            "name": "Comparison Data",
            "description": "Comparison of event-aligned data",
            "file_patterns": [
                "comparison_data/**/*"
            ]
        }
    ],
    "resources": {
        "cpu": 2,
        "gpu": 0,
        "memory": 10000
    },
    "description": "Combine peri-event analysis data from multiple recordings and perform a statistical comparison between two groups to determine if there is a difference in the fractions of up- or down-modulated neurons.",
    "visibility": "public",
    "version": "5.0.2"
}
